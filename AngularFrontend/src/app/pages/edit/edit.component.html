<div class="p-4">

  <div *ngIf="errorMessage.length !== 0 && !isLoading; else showList">
    <div class="d-flex justify-content-center align-items-center error__message">
      <h1>Sajnos nem találtuk meg a kereset filmet!</h1>
    </div>
  </div>
   
  <ng-template #showList>

    <div *ngIf="isLoading" class="full-height vertical-align-center flex-column">
      <div class="spinner-border" style="width: 4rem; height: 4rem" role="status">
        <span class="sr-only"></span>
      </div>
    </div>
    <div
      *ngIf="!isLoading && status !== 200"
      class="full-height vertical-align-center flex-column"
    >
      <div *ngIf="status === 400" class="alert alert-danger" role="alert">
        <b>Sikertelen mentés!</b><br /> 
      </div>
    
      <div class="p-4 content__container" aria-label="Regisztráció">
        <div class="d-flex justify-content-center">
          <img [src]="url" alt="image" class="image">
        </div>
        <div>
          <h2 class="mb-5">Film készítése</h2>
          <form [formGroup]="editForm" (ngSubmit)="onSubmit()">
            <div class="p-2">
              <p>
                <label for="title">Cím: </label>
                <input type="text" id="title" name="title" formControlName="title" class="w-100 mb-4 form-control">
              </p>
            
              <div *ngIf="editForm.controls['title'].invalid && (editForm.controls['title'].dirty || editForm.controls['title'].touched)"
                          class="alert">
                <div *ngIf="editForm.controls['title'].errors?.['required']" class="alert alert-danger">
                  Cím szükséges!
                </div>
                <div *ngIf="editForm.controls['title'].errors?.['maxlength']" class="alert alert-danger">
                  Cím túl hosszú!
                </div>
              </div>
            </div>

            <div class="p-2">
              <p>
                <label for="description">Leírás: </label>
                <input type="text" id="description" name="description" formControlName="description" class="w-100 mb-4 form-control">
              </p>
            
              <div *ngIf="editForm.controls['description'].invalid && (editForm.controls['description'].dirty || editForm.controls['description'].touched)"
                          class="alert">
                <div *ngIf="editForm.controls['description'].errors?.['required']" class="alert alert-danger">
                  Leírás szükséges!
                </div>
                <div *ngIf="editForm.controls['description'].errors?.['maxlength']" class="alert alert-danger">
                  Leírás túl hosszú!
                </div>
              </div>
            </div>

            <div class="p-2">
              <p>
                <label for="date">Dátum: </label>
                <input type="text" id="date" name="date" formControlName="date" class="w-100 mb-4 form-control">
              </p>
              <div *ngIf="editForm.controls['date'].invalid && (editForm.controls['date'].dirty || editForm.controls['date'].touched)"
                          class="alert">
                <div *ngIf="editForm.controls['date'].errors?.['required']" class="alert alert-danger">
                  Dátum szükséges!
                </div>
                <div *ngIf="editForm.controls['date'].errors?.['urlNumeric']" class="alert alert-danger">
                  Dátumnak 1900 és {{currentYear}} közti számnak kell lennie! 
                </div>
                <div *ngIf="editForm.controls['date'].errors?.['maxlength'] || editForm.controls['date'].errors?.['minlength']" class="alert alert-danger">
                  Dátumnak négy számjegyűnek kell lennie!
                </div>
              </div>

            </div>

            <div class="p-2">
              <p>
                <label for="url">Kép URL címe: </label>
                <input type="text" id="url" name="url" formControlName="url" class="w-100 mb-4 form-control">
              </p>
            
              <div *ngIf="editForm.controls['url'].invalid && (editForm.controls['url'].dirty || editForm.controls['url'].touched)"
                          class="alert">
                <div *ngIf="editForm.controls['url'].errors?.['required']" class="alert alert-danger">
                  Képhez tartozó URL szükséges!
                </div>
                <div *ngIf="editForm.controls['url'].errors?.['maxlength']" class="alert alert-danger">
                  Képhez tartozó URL túl hosszú!
                </div>
              </div>

            </div>
          
            
            <div class="d-flex justify-content-center w-100">
              <div class="w-50 d-flex justify-content-around ">
                <button class="btn btn-primary" (click)="onCancel()">Vissza</button>
                <button
                  class="btn btn-primary"
                  type="submit"
                  [disabled]="editForm.invalid"
                  >
                  Mentés
                </button>
              </div>
            </div>
            <h1 *ngIf="isLoading">LOADING</h1>
          </form>
        </div>
      </div>
    </div>  
  </ng-template>
</div>
